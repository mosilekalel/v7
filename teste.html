<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>üîß Diagn√≥stico Supabase - H@B!B!</title>
    <style>
        body {
            background: #0a0a0a;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            border: 1px solid #333;
            padding: 20px;
            background: #111;
        }
        h1 {
            color: #ffd700;
            text-align: center;
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
        }
        h2 {
            color: #00ffff;
            font-size: 16px;
            margin-top: 20px;
        }
        .test-card {
            border: 1px solid #333;
            padding: 15px;
            margin: 15px 0;
            background: #1a1a1a;
        }
        button {
            background: #333;
            color: #fff;
            border: 1px solid #00ff00;
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }
        button:hover {
            background: #00ff00;
            color: #000;
        }
        .log {
            background: #000;
            padding: 10px;
            border: 1px solid #333;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .success { color: #00ff00; }
        .error { color: #ff0000; }
        .warning { color: #ffff00; }
        .info { color: #00ffff; }
        .config-box {
            background: #222;
            padding: 10px;
            margin: 10px 0;
            border-left: 4px solid #ffd700;
        }
        .key {
            color: #ffd700;
            font-weight: bold;
        }
        .value {
            color: #fff;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß DIAGN√ìSTICO SUPABASE - H@B!B!</h1>
        
        <!-- CONFIGURA√á√ïES ATUAIS -->
        <div class="config-box">
            <h2>üìã CONFIGURA√á√ïES DO PROJETO</h2>
            <div><span class="key">URL:</span> <span class="value" id="display-url">https://kfhkssruuytpmdogauou.supabase.co</span></div>
            <div><span class="key">Anon Key:</span> <span class="value" id="display-key">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtmaGtzc3J1dXl0cG1kb2dhdW91Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5OTU4MDcsImV4cCI6MjA4NjU3MTgwN30.5Gu7m1rEj3MEXkA1XYCOqjbPAaDZJT_g5xDVPq_eUpQ</span></div>
        </div>

        <!-- BOT√ïES DE TESTE -->
        <div class="test-card">
            <h2>üîå TESTE 1: CONEX√ÉO B√ÅSICA</h2>
            <button onclick="testarConexaoBasica()">üì° Testar Conex√£o</button>
            <button onclick="testarCORS()">üåê Testar CORS</button>
            <button onclick="testarAPIVersion()">üìã Verificar API</button>
        </div>

        <div class="test-card">
            <h2>üì¶ TESTE 2: TABELAS</h2>
            <button onclick="listarTabelas()">üìã Listar Tabelas</button>
            <button onclick="criarTabelaUsuarios()">‚ûï Criar Tabela usuarios</button>
            <button onclick="verificarTabelaUsuarios()">üîç Verificar Tabela usuarios</button>
            <button onclick="verificarPoliticasRLS()">üîí Verificar RLS</button>
        </div>

        <div class="test-card">
            <h2>üë§ TESTE 3: OPERA√á√ïES CRUD</h2>
            <button onclick="testarInsert()">üìù Testar INSERT</button>
            <button onclick="testarSelect()">üîç Testar SELECT</button>
            <button onclick="testarUpdate()">üìù Testar UPDATE</button>
            <button onclick="testarDelete()">üóëÔ∏è Testar DELETE</button>
        </div>

        <div class="test-card">
            <h2>üîê TESTE 4: AUTENTICA√á√ÉO</h2>
            <button onclick="testarCadastroSimples()">üìù Testar Cadastro</button>
            <button onclick="testarLoginSimples()">üîë Testar Login</button>
            <button onclick="criarUsuarioTeste()">üë§ Criar Usu√°rio Teste</button>
        </div>

        <div class="test-card">
            <h2>‚ö° TESTE 5: DIAGN√ìSTICO R√ÅPIDO</h2>
            <button onclick="diagnosticoCompleto()">üöÄ Executar Todos os Testes</button>
            <button onclick="limparLog()">üßπ Limpar Log</button>
        </div>

        <!-- LOG DOS TESTES -->
        <h2>üìä RESULTADOS:</h2>
        <div class="log" id="log"></div>
    </div>

    <script>
        // CONFIGURA√á√ïES SUPABASE
        const SUPABASE_URL = 'https://kfhkssruuytpmdogauou.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtmaGtzc3J1dXl0cG1kb2dhdW91Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5OTU4MDcsImV4cCI6MjA4NjU3MTgwN30.5Gu7m1rEj3MEXkA1XYCOqjbPAaDZJT_g5xDVPq_eUpQ';

        // HEADERS PADR√ÉO
        const headers = {
            'apikey': SUPABASE_ANON_KEY,
            'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
            'Content-Type': 'application/json'
        };

        // FUN√á√ÉO DE LOG
        function log(mensagem, tipo = 'info') {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            let cor = '#00ffff'; // info
            
            if (tipo === 'success') cor = '#00ff00';
            if (tipo === 'error') cor = '#ff0000';
            if (tipo === 'warning') cor = '#ffff00';
            
            logDiv.innerHTML += `<div><span style="color: #888">[${timestamp}]</span> <span style="color: ${cor}">${mensagem}</span></div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(`[${timestamp}] ${mensagem}`);
        }

        function limparLog() {
            document.getElementById('log').innerHTML = '';
        }

        // ============================================
        // TESTE 1: CONEX√ÉO B√ÅSICA
        // ============================================

        async function testarConexaoBasica() {
            log('üì° TESTANDO CONEX√ÉO B√ÅSICA...', 'info');
            
            try {
                const response = await fetch(SUPABASE_URL, {
                    method: 'GET',
                    headers: headers
                });
                
                log(`Status HTTP: ${response.status} ${response.statusText}`, 'info');
                
                if (response.ok) {
                    log('‚úÖ CONEX√ÉO OK! Supabase est√° respondendo', 'success');
                } else {
                    const text = await response.text();
                    log(`‚ùå Erro ${response.status}: ${text.substring(0, 200)}`, 'error');
                }
            } catch (error) {
                log(`‚ùå ERRO DE REDE: ${error.message}`, 'error');
                log('   ‚ö†Ô∏è Poss√≠veis causas:', 'warning');
                log('   1. URL errada', 'warning');
                log('   2. Bloqueio de CORS', 'warning');
                log('   3. Sem internet', 'warning');
            }
        }

        async function testarCORS() {
            log('üåê TESTANDO CORS...', 'info');
            
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/`, {
                    method: 'OPTIONS',
                    headers: headers
                });
                
                const corsHeader = response.headers.get('access-control-allow-origin');
                log(`Access-Control-Allow-Origin: ${corsHeader || 'n√£o definido'}`, 'info');
                
                if (corsHeader === '*' || corsHeader?.includes(window.location.origin)) {
                    log('‚úÖ CORS configurado corretamente', 'success');
                } else {
                    log('‚ö†Ô∏è CORS pode estar bloqueando requisi√ß√µes', 'warning');
                }
            } catch (error) {
                log(`‚ùå Erro ao testar CORS: ${error.message}`, 'error');
            }
        }

        async function testarAPIVersion() {
            log('üìã VERIFICANDO API...', 'info');
            
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/`, {
                    method: 'GET',
                    headers: headers
                });
                
                const apiVersion = response.headers.get('supabase-api-version');
                log(`API Version: ${apiVersion || 'n√£o informado'}`, 'info');
                
                if (response.status === 200) {
                    log('‚úÖ API REST funcionando', 'success');
                }
            } catch (error) {
                log(`‚ùå Erro: ${error.message}`, 'error');
            }
        }

        // ============================================
        // TESTE 2: TABELAS
        // ============================================

        async function listarTabelas() {
            log('üìã LISTANDO TABELAS...', 'info');
            
            try {
                // Tenta acessar a tabela de metadados do PostgREST
                const response = await fetch(`${SUPABASE_URL}/rest/v1/`, {
                    method: 'GET',
                    headers: headers
                });
                
                if (response.status === 200) {
                    log('‚úÖ API REST acess√≠vel', 'success');
                    
                    // Tenta listar tabelas conhecidas
                    const tabelas = ['usuarios', 'transacoes', 'profiles', 'users'];
                    
                    for (const tabela of tabelas) {
                        try {
                            const testResponse = await fetch(`${SUPABASE_URL}/rest/v1/${tabela}?limit=1`, {
                                method: 'GET',
                                headers: headers
                            });
                            
                            if (testResponse.status === 200) {
                                log(`‚úÖ Tabela "${tabela}" existe`, 'success');
                            } else if (testResponse.status === 404) {
                                log(`‚ùå Tabela "${tabela}" N√ÉO existe`, 'error');
                            } else if (testResponse.status === 403) {
                                log(`üîí Tabela "${tabela}" existe mas RLS bloqueia`, 'warning');
                            }
                        } catch (e) {
                            // Ignora erros
                        }
                    }
                }
            } catch (error) {
                log(`‚ùå Erro: ${error.message}`, 'error');
            }
        }

        async function criarTabelaUsuarios() {
            log('‚ûï TENTANDO CRIAR TABELA usuarios...', 'info');
            
            // SQL para criar tabela
            const sql = `
                CREATE TABLE IF NOT EXISTS usuarios (
                    id SERIAL PRIMARY KEY,
                    usuario TEXT UNIQUE NOT NULL,
                    senha TEXT NOT NULL,
                    saldo DECIMAL(10,2) DEFAULT 0.00,
                    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
                );
            `;
            
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/rpc/exec_sql`, {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify({ query: sql })
                });
                
                if (response.ok) {
                    log('‚úÖ TABELA CRIADA COM SUCESSO!', 'success');
                } else {
                    const error = await response.text();
                    log(`‚ùå Erro ao criar tabela: ${response.status}`, 'error');
                    log(`   ${error.substring(0, 200)}`, 'error');
                    
                    if (response.status === 404) {
                        log('   ‚ö†Ô∏è RPC exec_sql n√£o dispon√≠vel', 'warning');
                        log('   üëâ Crie a tabela manualmente no SQL Editor do Supabase:', 'warning');
                        log('   CREATE TABLE usuarios (id SERIAL PRIMARY KEY, usuario TEXT UNIQUE, senha TEXT, saldo DECIMAL, created_at TIMESTAMP);', 'warning');
                    }
                }
            } catch (error) {
                log(`‚ùå Erro: ${error.message}`, 'error');
                log('   üëâ Crie a tabela manualmente no SQL Editor', 'warning');
            }
        }

        async function verificarTabelaUsuarios() {
            log('üîç VERIFICANDO TABELA usuarios...', 'info');
            
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/usuarios?limit=1`, {
                    method: 'GET',
                    headers: headers
                });
                
                if (response.status === 200) {
                    const data = await response.json();
                    log('‚úÖ TABELA "usuarios" EXISTE!', 'success');
                    log(`   Registros encontrados: ${data.length}`, 'info');
                    
                    if (data.length > 0) {
                        log(`   Exemplo: ${JSON.stringify(data[0])}`, 'info');
                    }
                } else if (response.status === 404) {
                    log('‚ùå TABELA "usuarios" N√ÉO EXISTE!', 'error');
                    log('   üëâ Crie a tabela no SQL Editor do Supabase', 'warning');
                } else if (response.status === 403) {
                    log('üîí TABELA EXISTE MAS RLS BLOQUEIA', 'warning');
                    
                    const error = await response.json();
                    log(`   Erro: ${JSON.stringify(error)}`, 'warning');
                } else {
                    log(`‚ùå Erro inesperado: ${response.status}`, 'error');
                }
            } catch (error) {
                log(`‚ùå Erro: ${error.message}`, 'error');
            }
        }

        async function verificarPoliticasRLS() {
            log('üîí VERIFICANDO POL√çTICAS RLS...', 'info');
            
            try {
                // Tenta fazer um SELECT
                const selectResponse = await fetch(`${SUPABASE_URL}/rest/v1/usuarios?limit=1`, {
                    method: 'GET',
                    headers: headers
                });
                
                if (selectResponse.status === 200) {
                    log('‚úÖ SELECT permitido (RLS configurado para leitura)', 'success');
                } else if (selectResponse.status === 403) {
                    log('‚ùå SELECT bloqueado por RLS', 'error');
                }
                
                // Tenta fazer um INSERT
                const testUser = 'test_rls_' + Date.now();
                const insertResponse = await fetch(`${SUPABASE_URL}/rest/v1/usuarios`, {
                    method: 'POST',
                    headers: { ...headers, 'Prefer': 'return=minimal' },
                    body: JSON.stringify({
                        usuario: testUser,
                        senha: 'teste123',
                        saldo: 0
                    })
                });
                
                if (insertResponse.status === 201 || insertResponse.status === 200) {
                    log('‚úÖ INSERT permitido (RLS configurado para escrita)', 'success');
                } else if (insertResponse.status === 403) {
                    log('‚ùå INSERT bloqueado por RLS', 'error');
                    log('   üëâ Execute no SQL Editor:', 'warning');
                    log(`   CREATE POLICY "Permitir insert p√∫blico" ON usuarios FOR INSERT TO anon WITH CHECK (true);`, 'warning');
                }
            } catch (error) {
                log(`‚ùå Erro: ${error.message}`, 'error');
            }
        }

        // ============================================
        // TESTE 3: OPERA√á√ïES CRUD
        // ============================================

        async function testarInsert() {
            log('üìù TESTANDO INSERT...', 'info');
            
            const testUser = 'teste_' + Math.floor(Math.random() * 10000);
            
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/usuarios`, {
                    method: 'POST',
                    headers: { ...headers, 'Prefer': 'return=representation' },
                    body: JSON.stringify({
                        usuario: testUser,
                        senha: 'senha123',
                        saldo: 100.50,
                        created_at: new Date().toISOString()
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    log('‚úÖ INSERT FUNCIONOU!', 'success');
                    log(`   Usu√°rio: ${testUser}`, 'success');
                    log(`   Resposta: ${JSON.stringify(data)}`, 'info');
                } else {
                    const error = await response.json();
                    log(`‚ùå INSERT FALHOU: ${response.status}`, 'error');
                    log(`   ${JSON.stringify(error)}`, 'error');
                    
                    if (response.status === 403) {
                        log('   üîí Erro de permiss√£o (RLS)', 'warning');
                    } else if (response.status === 409) {
                        log('   ‚ö†Ô∏è Usu√°rio j√° existe (unique violation)', 'warning');
                    } else if (response.status === 404) {
                        log('   ‚ùå Tabela n√£o existe', 'error');
                    }
                }
            } catch (error) {
                log(`‚ùå ERRO: ${error.message}`, 'error');
            }
        }

        async function testarSelect() {
            log('üîç TESTANDO SELECT...', 'info');
            
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/usuarios?limit=5`, {
                    method: 'GET',
                    headers: headers
                });
                
                if (response.ok) {
                    const data = await response.json();
                    log('‚úÖ SELECT FUNCIONOU!', 'success');
                    log(`   Registros encontrados: ${data.length}`, 'info');
                    
                    if (data.length > 0) {
                        log(`   Primeiro registro: ${JSON.stringify(data[0])}`, 'info');
                    }
                } else {
                    const error = await response.text();
                    log(`‚ùå SELECT FALHOU: ${response.status}`, 'error');
                    log(`   ${error.substring(0, 200)}`, 'error');
                }
            } catch (error) {
                log(`‚ùå ERRO: ${error.message}`, 'error');
            }
        }

        async function testarUpdate() {
            log('üìù TESTANDO UPDATE...', 'info');
            
            try {
                // Primeiro, pega um usu√°rio para atualizar
                const selectResponse = await fetch(`${SUPABASE_URL}/rest/v1/usuarios?limit=1`, {
                    method: 'GET',
                    headers: headers
                });
                
                if (!selectResponse.ok) {
                    log('‚ùå N√£o foi poss√≠vel buscar usu√°rio para update', 'error');
                    return;
                }
                
                const users = await selectResponse.json();
                if (users.length === 0) {
                    log('‚ùå Nenhum usu√°rio encontrado para testar update', 'error');
                    return;
                }
                
                const user = users[0];
                log(`   Atualizando usu√°rio: ${user.usuario}`, 'info');
                
                const response = await fetch(`${SUPABASE_URL}/rest/v1/usuarios?id=eq.${user.id}`, {
                    method: 'PATCH',
                    headers: { ...headers, 'Prefer': 'return=representation' },
                    body: JSON.stringify({ saldo: 999.99 })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    log('‚úÖ UPDATE FUNCIONOU!', 'success');
                    log(`   Saldo alterado para: ${data[0]?.saldo}`, 'info');
                } else {
                    const error = await response.json();
                    log(`‚ùå UPDATE FALHOU: ${response.status}`, 'error');
                    log(`   ${JSON.stringify(error)}`, 'error');
                }
            } catch (error) {
                log(`‚ùå ERRO: ${error.message}`, 'error');
            }
        }

        async function testarDelete() {
            log('üóëÔ∏è TESTANDO DELETE...', 'info');
            log('   ‚ö†Ô∏è DELETE n√£o ser√° executado por seguran√ßa', 'warning');
            log('   Para testar DELETE, descomente o c√≥digo', 'warning');
            
            // C√≥digo comentado por seguran√ßa
            /*
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/usuarios?id=eq.0`, {
                    method: 'DELETE',
                    headers: headers
                });
                // ... resto do c√≥digo
            } catch (error) {
                log(`‚ùå ERRO: ${error.message}`, 'error');
            }
            */
        }

        // ============================================
        // TESTE 4: AUTENTICA√á√ÉO
        // ============================================

        async function testarCadastroSimples() {
            log('üìù TESTANDO CADASTRO SIMPLES...', 'info');
            
            const testUser = 'teste_' + Math.floor(Math.random() * 10000);
            const testPass = '123456';
            
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/usuarios`, {
                    method: 'POST',
                    headers: { ...headers, 'Prefer': 'return=representation' },
                    body: JSON.stringify({
                        usuario: testUser,
                        senha: testPass, // Sem hash para teste simples
                        saldo: 100.00
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    log('‚úÖ CADASTRO FUNCIONOU!', 'success');
                    log(`   Usu√°rio: ${testUser}`, 'success');
                    log(`   ID: ${data[0]?.id}`, 'info');
                    log(`   Senha salva como: ${data[0]?.senha}`, 'info');
                } else {
                    const error = await response.json();
                    log(`‚ùå CADASTRO FALHOU: ${response.status}`, 'error');
                    log(`   ${JSON.stringify(error)}`, 'error');
                    
                    if (response.status === 403) {
                        log('   üîí Erro de permiss√£o. Configure as pol√≠ticas RLS:', 'warning');
                        log('   CREATE POLICY "Permitir insert" ON usuarios FOR INSERT TO anon WITH CHECK (true);', 'warning');
                    }
                }
            } catch (error) {
                log(`‚ùå ERRO: ${error.message}`, 'error');
            }
        }

        async function testarLoginSimples() {
            log('üîë TESTANDO LOGIN SIMPLES...', 'info');
            
            // Primeiro, cria um usu√°rio para teste
            const testUser = 'login_' + Math.floor(Math.random() * 10000);
            const testPass = 'minhasenha123';
            
            try {
                // Tenta criar usu√°rio
                const createResponse = await fetch(`${SUPABASE_URL}/rest/v1/usuarios`, {
                    method: 'POST',
                    headers: { ...headers, 'Prefer': 'return=representation' },
                    body: JSON.stringify({
                        usuario: testUser,
                        senha: testPass,
                        saldo: 50.00
                    })
                });
                
                if (!createResponse.ok) {
                    log('‚ùå N√£o foi poss√≠vel criar usu√°rio para teste', 'error');
                    return;
                }
                
                log(`‚úÖ Usu√°rio criado: ${testUser}`, 'success');
                
                // Tenta buscar o usu√°rio (simula login)
                const loginResponse = await fetch(`${SUPABASE_URL}/rest/v1/usuarios?usuario=eq.${testUser}`, {
                    method: 'GET',
                    headers: headers
                });
                
                if (loginResponse.ok) {
                    const users = await loginResponse.json();
                    if (users.length > 0) {
                        const user = users[0];
                        log('‚úÖ USU√ÅRIO ENCONTRADO!', 'success');
                        log(`   ID: ${user.id}`, 'info');
                        log(`   Saldo: ${user.saldo}`, 'info');
                        log(`   Senha armazenada: ${user.senha}`, 'info');
                        
                        // Verifica senha (compara√ß√£o simples)
                        if (user.senha === testPass) {
                            log('‚úÖ Senha confere (compara√ß√£o direta)', 'success');
                        } else {
                            log('‚ùå Senha N√ÉO confere', 'error');
                        }
                    }
                }
            } catch (error) {
                log(`‚ùå ERRO: ${error.message}`, 'error');
            }
        }

        async function criarUsuarioTeste() {
            log('üë§ CRIANDO USU√ÅRIO DE TESTE...', 'info');
            
            const usuarios = [
                { usuario: 'admin', senha: 'admin123', saldo: 1000 },
                { usuario: 'joao', senha: '123456', saldo: 500 },
                { usuario: 'maria', senha: '654321', saldo: 750 },
                { usuario: 'teste_' + Date.now(), senha: 'teste123', saldo: 200 }
            ];
            
            for (const user of usuarios) {
                try {
                    const response = await fetch(`${SUPABASE_URL}/rest/v1/usuarios`, {
                        method: 'POST',
                        headers: { ...headers, 'Prefer': 'return=minimal' },
                        body: JSON.stringify({
                            usuario: user.usuario,
                            senha: user.senha,
                            saldo: user.saldo,
                            created_at: new Date().toISOString()
                        })
                    });
                    
                    if (response.ok || response.status === 201) {
                        log(`‚úÖ Usu√°rio criado: ${user.usuario}`, 'success');
                    } else if (response.status === 409) {
                        log(`‚ö†Ô∏è Usu√°rio j√° existe: ${user.usuario}`, 'warning');
                    } else {
                        const error = await response.text();
                        log(`‚ùå Falha ao criar ${user.usuario}: ${response.status}`, 'error');
                    }
                } catch (error) {
                    log(`‚ùå Erro: ${error.message}`, 'error');
                }
            }
        }

        // ============================================
        // TESTE 5: DIAGN√ìSTICO COMPLETO
        // ============================================

        async function diagnosticoCompleto() {
            log('üöÄ INICIANDO DIAGN√ìSTICO COMPLETO...', 'info');
            log('=====================================', 'info');
            
            await testarConexaoBasica();
            log('-------------------------------------', 'info');
            
            await verificarTabelaUsuarios();
            log('-------------------------------------', 'info');
            
            await verificarPoliticasRLS();
            log('-------------------------------------', 'info');
            
            await testarInsert();
            log('-------------------------------------', 'info');
            
            await testarSelect();
            log('-------------------------------------', 'info');
            
            log('‚úÖ DIAGN√ìSTICO CONCLU√çDO!', 'success');
            log('=====================================', 'info');
        }

        // Executar teste inicial ao carregar
        window.onload = function() {
            log('üöÄ P√ÅGINA DE DIAGN√ìSTICO SUPABASE CARREGADA', 'success');
            log('üìã Clique nos bot√µes para executar os testes', 'info');
            log('üîß URL: ' + SUPABASE_URL, 'info');
        };
    </script>
</body>
</html>
